import{d as D,_ as T,u as M,r as b,o as $,a as y,c as g,b as s,n as f,w as h,e as u,v as d,f as _,t as j,g as C}from"./index.js";const R=D("settings",{state:()=>({profile:null,isLoading:!1,error:null}),actions:{async fetchSettings(){this.isLoading=!0;try{const p=await fetch("/api/auth/settings/",{credentials:"include"});if(!p.ok)throw new Error("Failed to fetch settings");const o=await p.json();this.profile=o}catch(p){console.error("Fetch settings error:",p),this.error=p.message}finally{this.isLoading=!1}},async saveSettings(p){this.isLoading=!0;try{const o=await fetch("/api/auth/settings/",{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},credentials:"include",body:JSON.stringify(p)});if(!o.ok)throw new Error("Failed to save settings");const n=await o.json();return this.profile=n,n}catch(o){throw console.error("Save settings error:",o),this.error=o.message,o}finally{this.isLoading=!1}},async uploadLogo(p){const o=new FormData;o.append("logo",p);try{const n=await fetch("/api/auth/settings/",{method:"PUT",headers:{"X-CSRFToken":this.getCookie("csrftoken")},credentials:"include",body:o});if(!n.ok)throw new Error("Failed to upload logo");const i=await n.json();return this.profile=i,i}catch(n){throw console.error("Logo upload error:",n),n}},getCookie(p){let o=null;if(document.cookie&&document.cookie!==""){const n=document.cookie.split(";");for(let i=0;i<n.length;i++){const c=n[i].trim();if(c.substring(0,p.length+1)===p+"="){o=decodeURIComponent(c.substring(p.length+1));break}}}return o}}});const z={class:"section"},X={class:"container"},Y={class:"columns"},G={class:"column is-3"},J={class:"menu"},O={class:"menu-list"},W={class:"menu-list"},q={class:"column is-9"},K={key:0,class:"box"},Q={class:"field"},Z={class:"control"},ss={class:"field"},es={class:"control"},ls={class:"field"},os={class:"control"},ts={class:"field mt-5"},as={class:"control"},is={key:1,class:"box"},ns={class:"field"},rs={class:"control"},us={class:"field"},ds={class:"control"},cs={class:"field"},ps={class:"control"},vs={class:"field"},ms={class:"control"},fs={class:"field"},bs={class:"control"},ys={class:"field mt-5"},gs={class:"control"},_s={key:2,class:"box"},hs={class:"field"},Cs={class:"control"},ks={class:"field"},Ss={class:"control"},xs={class:"field"},ws={class:"control"},Us={class:"field"},Bs={class:"control"},Vs={class:"field mt-5"},Is={class:"control"},As={key:3,class:"box"},Fs={class:"field"},Hs={class:"file has-name is-fullwidth"},Ls={class:"file-label"},Ps={class:"file-name"},Es={key:0,class:"mt-4"},Ns=["src"],Ds={class:"field"},Ts={class:"columns is-mobile mb-2"},Ms={class:"column"},$s={class:"field has-addons"},js={class:"control"},Rs={class:"control is-expanded"},zs={class:"columns is-mobile"},Xs={class:"column"},Ys={class:"field has-addons"},Gs={class:"control"},Js={class:"control is-expanded"},Os={class:"field mt-5"},Ws={class:"control"},qs={__name:"SettingsView",setup(p){var x,w;const o=R(),n=M(),i=b("profile"),c=b(!1),k=b(""),m=b({fullName:((x=n.user)==null?void 0:x.name)||"",email:((w=n.user)==null?void 0:w.email)||"",phone:""}),r=b({name:"",website:"",description:"",serviceAreas:"",yearsInBusiness:""}),v=b({facebook:"",instagram:"",linkedin:"",youtube:""}),a=b({logoUrl:"",primaryColor:"#485fc7",primaryColorHex:"#485fc7",secondaryColor:"#00d1b2",secondaryColorHex:"#00d1b2"});$(async()=>{var t,e;try{await o.fetchSettings(),o.profile&&(m.value={fullName:((t=n.user)==null?void 0:t.name)||"",email:((e=n.user)==null?void 0:e.email)||"",phone:o.profile.phone||""},r.value={name:o.profile.business_name||"",website:o.profile.website||"",description:o.profile.business_description||"",serviceAreas:o.profile.service_areas||"",yearsInBusiness:o.profile.years_in_business||""},v.value={facebook:o.profile.facebook||"",instagram:o.profile.instagram||"",linkedin:o.profile.linkedin||"",youtube:o.profile.youtube||""},a.value={logoUrl:o.profile.logo||"",primaryColor:o.profile.primary_color||"#485fc7",primaryColorHex:o.profile.primary_color||"#485fc7",secondaryColor:o.profile.secondary_color||"#00d1b2",secondaryColorHex:o.profile.secondary_color||"#00d1b2"})}catch(l){console.error("Error loading settings:",l)}});const U=async t=>{const e=t.target.files[0];if(e){k.value=e.name;try{await o.uploadLogo(e)}catch(l){console.error("Error uploading logo:",l)}}},B=async()=>{c.value=!0;try{await o.saveSettings({phone:m.value.phone})}catch(t){console.error("Error saving profile:",t)}finally{c.value=!1}},V=async()=>{c.value=!0;try{await o.saveSettings({business_name:r.value.name,website:r.value.website,business_description:r.value.description,service_areas:r.value.serviceAreas,years_in_business:r.value.yearsInBusiness})}catch(t){console.error("Error saving business details:",t)}finally{c.value=!1}},I=async()=>{c.value=!0;try{await o.saveSettings({facebook:v.value.facebook,instagram:v.value.instagram,linkedin:v.value.linkedin,youtube:v.value.youtube})}catch(t){console.error("Error saving social media:",t)}finally{c.value=!1}},A=async()=>{c.value=!0;try{await o.saveSettings({primary_color:a.value.primaryColor,secondary_color:a.value.secondaryColor})}catch(t){console.error("Error saving branding:",t)}finally{c.value=!1}},S=t=>{const e=t.replace("#",""),l=parseInt(e.substr(0,2),16),E=parseInt(e.substr(2,2),16),N=parseInt(e.substr(4,2),16);return(.299*l+.587*E+.114*N)/255>.5?"#000000":"#ffffff"},F=t=>{a.value.primaryColorHex=t.target.value.toUpperCase()},H=t=>{a.value.secondaryColorHex=t.target.value.toUpperCase()},L=t=>{const e=t.target.value;/^#[0-9A-F]{6}$/i.test(e)&&(a.value.primaryColor=e)},P=t=>{const e=t.target.value;/^#[0-9A-F]{6}$/i.test(e)&&(a.value.secondaryColor=e)};return(t,e)=>(y(),g("div",z,[s("div",X,[e[43]||(e[43]=s("h1",{class:"title"},"Settings",-1)),s("div",Y,[s("div",G,[s("aside",J,[e[20]||(e[20]=s("p",{class:"menu-label"},"Account",-1)),s("ul",O,[s("li",null,[s("a",{class:f({"is-active":i.value==="profile"}),onClick:e[0]||(e[0]=l=>i.value="profile")}," Profile Settings ",2)])]),e[21]||(e[21]=s("p",{class:"menu-label"},"Business",-1)),s("ul",W,[s("li",null,[s("a",{class:f({"is-active":i.value==="business"}),onClick:e[1]||(e[1]=l=>i.value="business")}," Business Details ",2)]),s("li",null,[s("a",{class:f({"is-active":i.value==="social"}),onClick:e[2]||(e[2]=l=>i.value="social")}," Social Media ",2)]),s("li",null,[s("a",{class:f({"is-active":i.value==="branding"}),onClick:e[3]||(e[3]=l=>i.value="branding")}," Branding ",2)])])])]),s("div",q,[i.value==="profile"?(y(),g("div",K,[e[25]||(e[25]=s("h2",{class:"title is-4"},"Profile Settings",-1)),s("form",{onSubmit:h(B,["prevent"])},[s("div",Q,[e[22]||(e[22]=s("label",{class:"label"},"Full Name",-1)),s("div",Z,[u(s("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>m.value.fullName=l),class:"input",type:"text"},null,512),[[d,m.value.fullName]])])]),s("div",ss,[e[23]||(e[23]=s("label",{class:"label"},"Email",-1)),s("div",es,[u(s("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>m.value.email=l),class:"input",type:"email"},null,512),[[d,m.value.email]])])]),s("div",ls,[e[24]||(e[24]=s("label",{class:"label"},"Phone",-1)),s("div",os,[u(s("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>m.value.phone=l),class:"input",type:"tel",placeholder:"(555) 555-5555"},null,512),[[d,m.value.phone]])])]),s("div",ts,[s("div",as,[s("button",{type:"submit",class:f(["button is-primary",{"is-loading":c.value}])}," Save Changes ",2)])])],32)])):_("",!0),i.value==="business"?(y(),g("div",is,[e[31]||(e[31]=s("h2",{class:"title is-4"},"Business Details",-1)),s("form",{onSubmit:h(V,["prevent"])},[s("div",ns,[e[26]||(e[26]=s("label",{class:"label"},"Business Name",-1)),s("div",rs,[u(s("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>r.value.name=l),class:"input",type:"text"},null,512),[[d,r.value.name]])])]),s("div",us,[e[27]||(e[27]=s("label",{class:"label"},"Website",-1)),s("div",ds,[u(s("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>r.value.website=l),class:"input",type:"url",placeholder:"https://..."},null,512),[[d,r.value.website]])])]),s("div",cs,[e[28]||(e[28]=s("label",{class:"label"},"Business Description",-1)),s("div",ps,[u(s("textarea",{"onUpdate:modelValue":e[9]||(e[9]=l=>r.value.description=l),class:"textarea",placeholder:"Describe your real estate business, specialties, target market...",rows:"4"},null,512),[[d,r.value.description]])])]),s("div",vs,[e[29]||(e[29]=s("label",{class:"label"},"Service Areas",-1)),s("div",ms,[u(s("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>r.value.serviceAreas=l),class:"input",type:"text",placeholder:"e.g., Greater Phoenix Area, Scottsdale, Paradise Valley"},null,512),[[d,r.value.serviceAreas]])])]),s("div",fs,[e[30]||(e[30]=s("label",{class:"label"},"Years in Business",-1)),s("div",bs,[u(s("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>r.value.yearsInBusiness=l),class:"input",type:"number"},null,512),[[d,r.value.yearsInBusiness]])])]),s("div",ys,[s("div",gs,[s("button",{type:"submit",class:f(["button is-primary",{"is-loading":c.value}])}," Save Business Details ",2)])])],32)])):_("",!0),i.value==="social"?(y(),g("div",_s,[e[36]||(e[36]=s("h2",{class:"title is-4"},"Social Media Accounts",-1)),s("form",{onSubmit:h(I,["prevent"])},[s("div",hs,[e[32]||(e[32]=s("label",{class:"label"},[s("span",{class:"icon-text"},[s("span",{class:"icon"},[s("i",{class:"fab fa-facebook"})]),s("span",null,"Facebook")])],-1)),s("div",Cs,[u(s("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>v.value.facebook=l),class:"input",type:"url",placeholder:"https://facebook.com/..."},null,512),[[d,v.value.facebook]])])]),s("div",ks,[e[33]||(e[33]=s("label",{class:"label"},[s("span",{class:"icon-text"},[s("span",{class:"icon"},[s("i",{class:"fab fa-instagram"})]),s("span",null,"Instagram")])],-1)),s("div",Ss,[u(s("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>v.value.instagram=l),class:"input",type:"url",placeholder:"https://instagram.com/..."},null,512),[[d,v.value.instagram]])])]),s("div",xs,[e[34]||(e[34]=s("label",{class:"label"},[s("span",{class:"icon-text"},[s("span",{class:"icon"},[s("i",{class:"fab fa-linkedin"})]),s("span",null,"LinkedIn")])],-1)),s("div",ws,[u(s("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>v.value.linkedin=l),class:"input",type:"url",placeholder:"https://linkedin.com/in/..."},null,512),[[d,v.value.linkedin]])])]),s("div",Us,[e[35]||(e[35]=s("label",{class:"label"},[s("span",{class:"icon-text"},[s("span",{class:"icon"},[s("i",{class:"fab fa-youtube"})]),s("span",null,"YouTube")])],-1)),s("div",Bs,[u(s("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>v.value.youtube=l),class:"input",type:"url",placeholder:"https://youtube.com/..."},null,512),[[d,v.value.youtube]])])]),s("div",Vs,[s("div",Is,[s("button",{type:"submit",class:f(["button is-primary",{"is-loading":c.value}])}," Save Social Media ",2)])])],32)])):_("",!0),i.value==="branding"?(y(),g("div",As,[e[42]||(e[42]=s("h2",{class:"title is-4"},"Branding",-1)),s("form",{onSubmit:h(A,["prevent"])},[s("div",Fs,[e[38]||(e[38]=s("label",{class:"label"},"Logo",-1)),s("div",Hs,[s("label",Ls,[s("input",{class:"file-input",type:"file",onChange:U,accept:"image/*"},null,32),e[37]||(e[37]=s("span",{class:"file-cta"},[s("span",{class:"file-icon"},[s("i",{class:"fas fa-upload"})]),s("span",{class:"file-label"}," Choose a fileâ€¦ ")],-1)),s("span",Ps,j(k.value||"No file selected"),1)])]),a.value.logoUrl?(y(),g("div",Es,[s("img",{src:a.value.logoUrl,alt:"Business Logo",style:{"max-height":"100px"}},null,8,Ns)])):_("",!0)]),s("div",Ds,[e[41]||(e[41]=s("label",{class:"label"},"Brand Colors",-1)),s("div",Ts,[e[39]||(e[39]=s("div",{class:"column is-3"},[s("label",{class:"label is-small"},"Primary Color")],-1)),s("div",Ms,[s("div",$s,[s("div",js,[u(s("input",{"onUpdate:modelValue":e[16]||(e[16]=l=>a.value.primaryColor=l),class:"input color-input",type:"color",onInput:F},null,544),[[d,a.value.primaryColor]])]),s("div",Rs,[u(s("input",{"onUpdate:modelValue":e[17]||(e[17]=l=>a.value.primaryColorHex=l),class:"input",type:"text",placeholder:"#000000",onInput:L},null,544),[[d,a.value.primaryColorHex]])])]),s("div",{class:"color-preview mt-2 has-text-centered",style:C({backgroundColor:a.value.primaryColor})},[s("span",{style:C({color:S(a.value.primaryColor)})}," Primary Brand Color ",4)],4)])]),s("div",zs,[e[40]||(e[40]=s("div",{class:"column is-3"},[s("label",{class:"label is-small"},"Secondary Color")],-1)),s("div",Xs,[s("div",Ys,[s("div",Gs,[u(s("input",{"onUpdate:modelValue":e[18]||(e[18]=l=>a.value.secondaryColor=l),class:"input color-input",type:"color",onInput:H},null,544),[[d,a.value.secondaryColor]])]),s("div",Js,[u(s("input",{"onUpdate:modelValue":e[19]||(e[19]=l=>a.value.secondaryColorHex=l),class:"input",type:"text",placeholder:"#000000",onInput:P},null,544),[[d,a.value.secondaryColorHex]])])]),s("div",{class:"color-preview mt-2 has-text-centered",style:C({backgroundColor:a.value.secondaryColor})},[s("span",{style:C({color:S(a.value.secondaryColor)})}," Secondary Brand Color ",4)],4)])])]),s("div",Os,[s("div",Ws,[s("button",{type:"submit",class:f(["button is-primary",{"is-loading":c.value}])}," Save Branding ",2)])])],32)])):_("",!0)])])])]))}},Zs=T(qs,[["__scopeId","data-v-9fc8b778"]]);export{Zs as default};
